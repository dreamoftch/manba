!function(name,definition){var hasDefine="function"==typeof define,hasExports="undefined"!=typeof module&&module.exports;hasDefine?define(definition):hasExports?module.exports=definition():this.manba=definition()}(0,function(){"use strict";var FORMAT_LIST={l:"YYYY-MM-DD",ll:"YYYY年MM月DD日",k:"YYYY-MM-DD hh:mm",kk:"YYYY年MM月DD日 hh点mm分",kkk:"YYYY年MM月DD日 hh点mm分 q",f:"YYYY-MM-DD hh:mm:ss",ff:"YYYY年MM月DD日 hh点mm分ss秒",fff:"YYYY年MM月DD日 hh点mm分ss秒 星期w",n:"MM-DD",nn:"MM月DD日"},timeDelay=0,MSE=new Date(1970,0,1,0,0,0).getTime(),WEEK=["日","一","二","三","四","五","六"],DAY_STRING=["上午","下午"];function _Manba(arg1,arg2){return Utils.initmanba(this,arg1,arg2),this}_Manba.prototype.format=function(str){var v=this.isValid();if(!0!==v)return v;var formatStr=FORMAT_LIST[str=str||"l"]||str;return Utils.format(this._date,formatStr)},_Manba.prototype.UTCformat=function(str){var v=this.isValid();if(!0!==v)return v;var formatStr=FORMAT_LIST[str=str||"l"]||str;return Utils.UTCformat(this._date,formatStr)},_Manba.prototype.toString=function(){var v=this.isValid();return!0!==v?v:this._date.toString()},_Manba.prototype.toISOString=function(utcZone){var v=this.isValid();if(!0!==v)return v;var offset=0,dif=0<=(offset=void 0!==utcZone?60*utcZone:-this._date.getTimezoneOffset())?"+":"-";return console.log(Utils.pad(offset/60)),manba(this.time()+60*offset*1e3).UTCformat("yyyy-MM-ddThh:mm:ss")+dif+Utils.pad(offset/60)+":"+Utils.pad(offset%60)},_Manba.prototype.toLocalString=function(){var v=this.isValid();if(!0!==v)return v;var offset=-this._date.getTimezoneOffset(),dif=0<=offset?"+":"-";return this.format("yyyy-MM-ddThh:mm:ss")+dif+Utils.pad(offset/60)+":"+Utils.pad(offset%60)},_Manba.prototype.distance=function(_m,type,weekStart){var v=this.isValid();if(!0!==v)return v;var m=this;if(type=type||manba.DAY,!0!==(v=(_m=manba(_m)).isValid()))return v;switch(type){case manba.MINUTE:return Math.floor((m.time()-_m.time())/60/1e3);case manba.HOUR:return Utils.getHours(m._date)-Utils.getHours(_m._date);case manba.DAY:return Utils.getDays(m._date)-Utils.getDays(_m._date);case manba.WEEK:return(Utils.getDays(m.startOf(manba.WEEK,weekStart)._date)-Utils.getDays(_m.startOf(manba.WEEK,weekStart)._date))/7;case manba.MONTH:return Utils.getMonths(m._date)-Utils.getMonths(_m._date);case manba.YEAR:return m._date.getYear()-_m._date.getYear()}return 0},_Manba.prototype.getWeekOfYear=function(weekStart){weekStart=(weekStart||0)-0,(isNaN(weekStart)||6<weekStart)&&(weekStart=0);this.year();var firstDay=this.startOf(manba.YEAR),firstWeekDays=7-firstDay.day()+weekStart,dayOfYear=(this.startOf(manba.DAY).time()-firstDay.time())/864e5+1;return Math.ceil((dayOfYear-firstWeekDays)/7)+1},_Manba.prototype.getWeekOfMonth=function(weekStart){weekStart=(weekStart||0)-0,(isNaN(weekStart)||6<weekStart)&&(weekStart=0);var dayOfWeek=this.day(),day=this.date();return Math.ceil((day-dayOfWeek-1)/7)+(weekStart<=dayOfWeek?1:0)},_Manba.prototype.isLeapYear=function(){var v=this.isValid();return!0!==v?v:Utils.isLeapYear(this.year())},_Manba.prototype.isThisYear=function(){var v=this.isValid();return!0!==v?v:Utils.timestamp(this._date)},_Manba.prototype.isBefore=function(){var v=this.isValid();return!0!==v?v:Utils.timestamp(this._date)},_Manba.prototype.isAfter=function(){var v=this.isValid();return!0!==v?v:Utils.timestamp(this._date)},_Manba.prototype.month=function(num){var v=this.isValid();if(!0!==v)return v;var m=this;return null==num?m._date.getMonth()+1:(num=parseInt(num),num=m._date.setMonth(num-1),m)},_Manba.prototype.add=function(num,type){var v=this.isValid();if(!0!==v)return v;var m=this;switch(num=parseInt(num),type=type||manba.DAY){case manba.DAY:m.time(m.time()+864e5*num);break;case manba.MONTH:var originDay=m.date(),month_add=m.month()+num;m.month(month_add),m.date()!=originDay&&(m.add(-1,manba.MONTH),m.date(m.endOf(manba.MONTH).date()));break;case manba.QUARTER:m.month(m.month()+3*num);break;case manba.YEAR:m.year(m.year()+num);break;case manba.WEEK:m.time(m.time()+6048e5*num);break;case manba.HOUR:m.time(m.time()+36e5*num);break;case manba.MINUTE:m.time(m.time()+6e4*num);break;case manba.SECOND:m.time(m.time()+1e3*num);break;case manba.TIME:m.time(m.time()+num)}return m},_Manba.prototype.clone=function(){return new _Manba(this)},_Manba.prototype.endOf=function(type,set){var v=this.isValid();if(!0!==v)return v;var m=new _Manba(this);return type=type||manba.DAY,(m=m.startOf(type,set)).add(1,type),m.add(-1,manba.SECOND),m},_Manba.prototype.startOf=function(type,set){var v=this.isValid();if(!0!==v)return v;var m=new _Manba(this);switch(type=type||manba.DAY){case manba.DAY:m.milliseconds(0),m.seconds(0),m.minutes(0),m.hours(0);break;case manba.MONTH:m.date(1),m=m.startOf(manba.DAY);break;case manba.QUARTER:(m=m.startOf(manba.MONTH)).add(-(m.month()-1)%3,manba.MONTH);break;case manba.WEEK:m=m.startOf(manba.DAY);var startDay=(set=set||manba.SUNDAY)==manba.SUNDAY?0:1;0==m.day()&&1==startDay&&(startDay=-6),m.add(-m.day()+startDay,manba.DAY);break;case manba.YEAR:(m=m.startOf(manba.DAY)).month(1),m.date(1);break;case manba.HOUR:m.time(36e5*Math.floor(m.time()/36e5))}return m},_Manba.prototype.isValid=function(){return!!Utils.isDate(this._date)||"Invalid Date"};var Utils={initmanba:function(manba_obj,arg1,arg2){var _date=new Date,date_bak=_date;null!=arg1&&(Utils.isNumber(arg1)?_date.setTime(arg1):Utils.isArray(arg1)?(Utils.padMonth(arg1),_date=Utils.initDateWithArray(arg1)):Utils.isDate(arg1)?_date=arg1:Utils.isString(arg1)?_date=Utils.parse(arg1,arg2):arg1 instanceof _Manba&&(_date=new Date(arg1.time()))),date_bak===(manba_obj._date=_date)&&0!=timeDelay&&manba_obj.add(timeDelay,manba.TIME)},initDateWithArray:function(args){return 1<args.length?new Date((new(Function.prototype.bind.apply(Date,[0].concat(args)))).setFullYear(args[0])):new Date},pad:function(num,targetLength){targetLength=targetLength||2;var padString="0";return(num=String(Math.abs(num)||0)).length>=targetLength?num:(targetLength-=num.length,(padString+=padString.repeat(targetLength)).slice(0,targetLength)+String(num))},parse:function(str,arg2){if(Utils.isString(arg2)){var obj={Y:0,M:1,D:0,H:0,m:0,S:0};return arg2.replace(/([^YyMDdHhmsS]*?)(([YyMDdHhmsS])\3*)([^YyMDdHhmsS]*?)/g,function(m,$1,$2,$3,$4,idx,old){var num=parseInt(str.substr(idx+$1.length,$2.length),10);return"m"==$3.toLowerCase()?obj[$3]=num:obj[$3.toUpperCase()]=num,""}),obj.M--,date=Utils.initDateWithArray([obj.Y,obj.M,obj.D,obj.H,obj.m,obj.S])}var date,matched=/^(\d{4,})\-(\d{2})\-(\d{2})\s?\:?(\d{2})?\:?(\d{2})?\:?(\d{2})?$/i.exec(str);if(null!==matched)return matched.shift(),Utils.padMonth(matched),Utils.popUndefined(matched),Utils.initDateWithArray(matched);if("Invalid Date"==(date=new Date(str)))throw new Error("Invalid date parse from "+str);return date},popUndefined:function(arr){return 0<arr.length&&null==arr[arr.length-1]?(arr.pop(),Utils.popUndefined(arr)):arr},padMonth:function(arr){1<arr.length&&0<arr[1]&&(arr[1]-=1)},isLeapYear:function(year){return year%4==0&&year%100!=0||year%400==0},format:function(date,formatStr){var str=formatStr;return str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=str.replace(/yyyy|YYYY/,this.pad(date.getFullYear(),4))).replace(/yy|YY/,8<date.getFullYear()%100?(date.getFullYear()%100).toString():"0"+date.getFullYear()%100)).replace(/MM/,8<date.getMonth()?(date.getMonth()+1).toString():"0"+(date.getMonth()+1))).replace(/M/g,date.getMonth()+1)).replace(/w|W/g,WEEK[date.getDay()])).replace(/dd|DD/,this.pad(date.getDate()))).replace(/d|D/g,date.getDate())).replace(/hh|HH/,this.pad(date.getHours()))).replace(/h|H/g,date.getHours())).replace(/mm/,this.pad(date.getMinutes()))).replace(/m/g,date.getMinutes())).replace(/ss|SS/,this.pad(date.getSeconds()))).replace(/s|S/g,date.getSeconds())).replace(/q|Q/g,12<date.getHours()?DAY_STRING[1]:DAY_STRING[0])},UTCformat:function(date,formatStr){var str=formatStr;return str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=(str=str.replace(/yyyy|YYYY/,this.pad(date.getFullYear(),4))).replace(/yy|YY/,8<date.getUTCFullYear()%100?(date.getUTCFullYear()%100).toString():"0"+date.getUTCFullYear()%100)).replace(/MM/,8<date.getUTCMonth()?(date.getUTCMonth()+1).toString():"0"+(date.getUTCMonth()+1))).replace(/M/g,date.getUTCMonth()+1)).replace(/w|W/g,WEEK[date.getUTCDay()])).replace(/dd|DD/,this.pad(date.getUTCDate()))).replace(/d|D/g,date.getUTCDate())).replace(/hh|HH/,this.pad(date.getUTCHours()))).replace(/h|H/g,date.getUTCHours())).replace(/mm/,this.pad(date.getUTCMinutes()))).replace(/m/g,date.getUTCMinutes())).replace(/ss|SS/,this.pad(date.getUTCSeconds()))).replace(/s|S/g,date.getUTCSeconds())).replace(/q|Q/g,12<date.getUTCHours()?DAY_STRING[1]:DAY_STRING[0])},timestamp:function(date){return Math.floor(date.getTime()/1e3)},getDays:function(date){return Math.floor((date.getTime()-MSE)/864e5)},getHours:function(date){return Math.floor((date.getTime()-MSE)/36e5)},getMonths:function(date){return 12*date.getYear()+date.getMonth()+1},isObject:function(input){return"[object Object]"===Object.prototype.toString.call(input)},isArray:function(input){return input instanceof Array||"[object Array]"===Object.prototype.toString.call(input)},isDate:function(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)},isNumber:function(input){return input instanceof Number||"[object Number]"===Object.prototype.toString.call(input)},isString:function(input){return input instanceof String||"[object String]"===Object.prototype.toString.call(input)},extend:function(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a},makeGetSet:function(unit){return function(value){return null!=value?(Date.prototype["set"+unit].call(this._date,value),this):Date.prototype["get"+unit].call(this._date)}}};function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var manbaPrototype__proto=_Manba.prototype,methods={year:"FullYear",day:"Day",date:"Date",hours:"Hours",milliseconds:"Milliseconds",seconds:"Seconds",minutes:"Minutes",time:"Time"};for(var unit in methods)manbaPrototype__proto[unit]=Utils.makeGetSet(methods[unit]);var manba=function(param,arg2){return param instanceof _Manba?new _Manba(param):Utils.isObject(param)?(param.formatString&&Utils.isObject(param.formatString)&&Utils.extend(FORMAT_LIST,param.formatString),void(param.now&&(timeDelay=manba(param.now).time()-manba().time()))):new _Manba(param,arg2)};return manba.config=function(param){param.formatString&&Utils.isObject(param.formatString)&&Utils.extend(FORMAT_LIST,param.formatString),param.now&&(timeDelay=manba(param.now).time()-manba().time())},manba.SECOND="SECOND",manba.MINUTE="MINUTE",manba.HOUR="HOUR",manba.DAY="DAY",manba.MONTH="MONTH",manba.YEAR="YEAR",manba.WEEK="WEEK",manba.TIME="TIME",manba.QUARTER="QUARTER",manba.MONDAY=1,manba.TUESDAY=2,manba.WEDNESDAY=3,manba.THURSDAY=4,manba.FRIDAY=5,manba.SATURDAY=6,manba.SUNDAY=7,manba});